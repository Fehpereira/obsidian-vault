## # D709 Conhecendo o Projeto

![[Pasted image 20250620175823.png]]
![[Pasted image 20250620175925.png]]
![[Pasted image 20250620175945.png]]

---

## # D710 Criando O Projeto

``` bash
npm init -y
```

---

## # D711 Configurando O Projeto

```bash
npm i typescript @types/node tsx -D
```

``` bash
npm i express
```

```bash
npm i --save-dev @types/express
```

```json
//tsconfig.json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023"],
  
    "paths": {
      "@/*": ["./src/*"]
    },

    "module": "node16",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,

    "strict": true,
    "skipLibCheck": true
  }
}

```

```json
//package.json 
"scripts": {
"dev": "tsx watch src/server.ts"
}
```

``` ts
//server.ts
import express from 'express';

const PORT = 3333;
const app = express();
app.use(express.json());

app.listen(PORT, () =>
  console.log(`Server is running on port http://localhost:3333`),
);
```

---

## # D712 Criando a Estrutura do Projeto

![[Pasted image 20250620185505.png]]
products-controller
![[Pasted image 20250620185635.png]]

routes 
![[Pasted image 20250620185727.png]]

server
![[Pasted image 20250620185746.png]]

---

## # D713 Configurando o Insomnia

![[Pasted image 20250620192054.png]]

---

## # D714 Criando o Middleware de Tratamento de Exceções

AppError
![[Pasted image 20250620192721.png]]

error-handling
![[Pasted image 20250620192702.png]]


---

## # D715 Instalando e Configurando Knex.js

```bash
npm i knex sqlite3
```

```ts
//knex.ts
export default {
  client: 'sqlite3',
  connection: {
    filename: './src/database/database.db',
  },
  useNullAsDefault: true,
  migrations: {
    extensions: 'ts',
    directory: './src/database/migrations',
  },
  seeds: {
    extensions: 'ts',
    directory: './src/database/seeds',
  },
};
```

```json
//package.json

"scripts": {
    "dev": "tsx watch src/server.ts",
    "knex": "node --import tsx ./node_modules/.bin/knex"
  },
```

---

## # D716 Habilitando Restrição de Relacionamentos

knexfile
![[Pasted image 20250620202028.png]]

---

## # D717 Criando a Migration de Produtos

![[Pasted image 20250621105738.png]]

---

## # D718 Abrindo Banco de Dados.

![[Pasted image 20250621105813.png]]

---

## # D719 Criando a Conexão com o Banco de Dados

database/knex.ts
![[Pasted image 20250621110107.png]]

---

## # D720 Adicionando e configurando Zod.

```bash
npm i zod@3.23.8
```

![[Pasted image 20250621110420.png]]

---

## # D721 Validando Dados do Produto

![[Pasted image 20250621113535.png]]

---

## # D722 Adicionando Produto no Banco

![[Pasted image 20250621124418.png]]
![[Pasted image 20250621124433.png]]


---

## # D723 Listando Produtos

Minha versão(sem utilziar o banco de dados para a listagem):

![[Pasted image 20250621132526.png]]

Versão correta(utilizando banco de dados para listagem):

![[Pasted image 20250621133534.png]]

---

## # D724 Atualizando Produtos

![[Pasted image 20250621142527.png]]

---

## # D725 Removendo Produtos

![[Pasted image 20250623164429.png]]

---
## # D726 Seed de Produtos

```bash
npm run knex -- seed:make insert-products
```


![[Pasted image 20250623171855.png]]

```bash
npm run knex -- seed:run
```

---

## # D727 Criando a Tabela de Mesas

```bash
npm run knex -- migrate:make create-tables
```

![[Pasted image 20250623172658.png]]
```bash
npm run knex -- migrate:latest
```

---

## # D728 Seed de Tabelas

```bash
npm run knex -- seed:make insert-tables
```

![[Pasted image 20250623173405.png]]
```bash
npm run knex -- seed:run
```

---

## # D729 Listando Mesas

![[Pasted image 20250623183023.png]]
![[Pasted image 20250623183046.png]]
![[Pasted image 20250623183058.png]]
![[Pasted image 20250623183124.png]]

---

## # D730 Criando Tabela de Sessao da Mesa

```bash
npm run knex -- migrate:make create-tables-sessions
```

![[Pasted image 20250623184143.png]]

```bash
npm run knex -- migrate:latest
```

---

## # D731 Rota e Controller de Sessão da Mesa

![[Pasted image 20250623185215.png]]

---

## # D732 Abrindo a Mesa

![[Pasted image 20250623190051.png]]
![[Pasted image 20250623190102.png]]

---

## # D733 Refinando Abertura da Mesa

![[Pasted image 20250624191649.png]]

---

## # D734 Listando Sessoes Das Mesas

![[Pasted image 20250624193241.png]]

---

## # D735 Validando Id Da Sessao

![[Pasted image 20250624193811.png]]

---

## # D736 Fechando A Mesa

![[Pasted image 20250624194612.png]]

---

## # D737 Migration de Pedidos

```bash
npm run knex -- migrate:make create-orders
```
![[Pasted image 20250624200653.png]]
```bash
npm run knex -- migrate:latest
```

---

## # D738 Tratando Dados do Pedido

![[Pasted image 20250625103310.png]]

---

## # D739 Regras de Negócio do Pedido

![[Pasted image 20250625201127.png]]

---

## # D740 Salvando Pedido

![[Pasted image 20250625211043.png]]

---

## # D741 Rota Para Listar Pedidos Por Mesa

![[Pasted image 20250625211513.png]]

---

## # D742 Listando Pedidos por Mesa

![[Pasted image 20250625214912.png]]

---

## # D743 Exibindo Total do Item do Pedido

![[Pasted image 20250625215303.png]]

---

## # D744 Calculando o Total da Conta

![[Pasted image 20250625220459.png]]

---

